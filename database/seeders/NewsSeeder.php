<?php

namespace Database\Seeders;

use App\Models\News;
use App\Models\Restaurant;
use Illuminate\Database\Seeder;

class NewsSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Находим ресторан Gretto
        $grettoRestaurant = Restaurant::where('slug', 'gretto')->first();

        if (!$grettoRestaurant) {
            $this->command->error('Ресторан Gretto не найден. Убедитесь, что RestaurantSeeder выполнен.');
            return;
        }

        // Создаем новости для ресторана Gretto
        $newsData = [
            [
                'title' => 'Открытие летней террасы',
                'slug' => 'otkrytie-letnej-terrasy',
                'description' => 'С радостью сообщаем, что в ресторане Gretto открылась уютная летняя терраса! Наслаждайтесь изысканными блюдами на свежем воздухе в окружении зелени. Терраса оборудована всем необходимым для комфортного отдыха и работает ежедневно с 12:00 до 23:00. Бронирование столиков доступно по телефону и через наш сайт.',
                'order' => 1,
            ],
            [
                'title' => 'Новое сезонное меню',
                'slug' => 'novoe-sezonnoe-menu',
                'description' => 'Встречайте обновленное весенне-летнее меню! Наши шеф-повара подготовили уникальные блюда из свежих сезонных продуктов. В меню появились легкие салаты с молодой зеленью, освежающие супы-пюре, блюда на гриле и авторские десерты. Особенно рекомендуем попробовать наш фирменный тартар из тунца и ванильную панна-котту с ягодным соусом.',
                'order' => 2,
            ],
            [
                'title' => 'Мастер-класс от шеф-повара',
                'slug' => 'master-klass-ot-shef-povara',
                'description' => 'Приглашаем на кулинарный мастер-класс "Секреты итальянской пасты" от нашего шеф-повара Марко Росси! Мероприятие состоится 15 июня в 18:00. Вы научитесь готовить домашнюю пасту с нуля, узнаете секреты приготовления идеального соуса карбонара и получите рецепты для домашнего приготовления. Количество мест ограничено - 12 участников. Стоимость участия: 3500 рублей, включает ужин.',
                'order' => 3,
            ],
            [
                'title' => 'Винная дегустация',
                'slug' => 'vinnaya-degustaciya',
                'description' => 'Каждую пятницу в 19:00 в ресторане Gretto проходят винные дегустации с нашим сомелье. Откройте для себя изысканные вина из различных регионов мира, узнайте об особенностях терруара и правилах сочетания вин с блюдами. В программе дегустации: 5 сортов вин, закуски от шеф-повара и увлекательный рассказ о винодельческих традициях. Предварительная запись обязательна.',
                'order' => 4,
            ],
            [
                'title' => 'Корпоративные мероприятия',
                'slug' => 'korporativnye-meropriyatiya',
                'description' => 'Ресторан Gretto - идеальное место для проведения корпоративных мероприятий! Мы предлагаем индивидуальный подход к организации деловых встреч, презентаций и торжественных ужинов. В нашем распоряжении отдельный зал на 40 персон, современное аудио-видео оборудование и специальное бизнес-меню. Наша команда поможет организовать мероприятие "под ключ" с учетом всех ваших пожеланий.',
                'order' => 5,
            ],
            [
                'title' => 'Семейные воскресенья',
                'slug' => 'semejnye-voskresnya',
                'description' => 'Каждое воскресенье в Gretto - семейный день! Специальное детское меню, развлекательная программа для малышей и скидка 15% на основные блюда для семей с детьми. Пока родители наслаждаются изысканной кухней, дети могут поучаствовать в кулинарных мастер-классах по приготовлению пиццы и украшению десертов. Время проведения семейной программы: с 12:00 до 16:00.',
                'order' => 6,
            ],
        ];

        foreach ($newsData as $news) {
            News::create([
                'title' => $news['title'],
                'slug' => $news['slug'],
                'description' => $news['description'],
                'order' => $news['order'],
                'restaurant_id' => $grettoRestaurant->id,
            ]);
        }

        $this->command->info('Создано ' . count($newsData) . ' новостей для ресторана Gretto.');
    }
}